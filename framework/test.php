<?

$str='a:15:{s:4:"type";s:1:"0";s:5:"width";s:3:"960";s:6:"height";s:3:"325";s:6:"border";s:1:"0";s:11:"bordercolor";s:7:"#ffffff";s:7:"bgcolor";s:7:"#F0F0F0";s:5:"bgimg";s:0:"";s:4:"imgw";s:1:"0";s:4:"imgh";s:1:"0";s:4:"done";s:1:"8";s:8:"duration";s:3:"500";s:4:"move";s:1:"1";s:4:"zoom";s:1:"1";s:3:"btn";a:4:{i:0;a:13:{s:5:"color";s:4:"#000";s:5:"hover";s:4:"#000";s:6:"alpha1";s:2:"50";s:6:"alpha2";s:2:"75";s:7:"fncolor";s:7:"#E3E3E3";s:7:"fnhover";s:4:"#FFF";s:3:"img";s:4:"none";s:7:"imgcurr";s:9:"type0.gif";s:3:"pos";s:1:"0";s:4:"posx";s:6:"center";s:1:"h";s:2:"35";s:1:"s";s:1:"1";s:2:"is";s:1:"1";}i:1;a:11:{s:5:"color";s:3:"#33";s:5:"hover";s:4:"#900";s:6:"alpha1";s:2:"60";s:6:"alpha2";s:3:"100";s:3:"img";s:9:"type1.gif";s:7:"imgcurr";s:0:"";s:3:"pos";s:2:"19";s:1:"w";s:2:"19";s:1:"h";s:2:"19";s:1:"s";s:1:"4";s:2:"is";s:2:"10";}i:2;a:13:{s:5:"color";s:4:"#666";s:5:"hover";s:4:"#EEE";s:6:"alpha1";s:3:"100";s:6:"alpha2";s:3:"100";s:7:"fncolor";s:4:"#EEE";s:7:"fnhover";s:4:"#333";s:3:"img";s:11:"type2_1.gif";s:7:"imgcurr";s:11:"type2_2.gif";s:3:"pos";s:2:"42";s:1:"w";s:3:"155";s:1:"h";s:2:"42";s:1:"s";s:1:"0";s:2:"is";s:1:"0";}i:3;a:2:{s:3:"img";s:11:"type3_1.gif";s:7:"imgcurr";s:11:"type3_2.gif";}}s:9:"duceflash";a:3:{i:0;a:4:{s:3:"pic";s:38:"/images/20130527/eaff77c390cb72ee.jpg";s:3:"url";s:39:"http://jiuzhiyue.com/?product-3442.html";s:3:"alt";s:0:"";s:1:"i";s:1:"0";}i:1;a:4:{s:3:"pic";s:38:"/images//20130527/5ecd64f4932ba62a.jpg";s:3:"url";s:79:"http://jiuzhiyue.com/?gallery--n,%E5%8F%8C%E8%82%A9%E8%83%8C%E5%8C%85-grid.html";s:3:"alt";s:0:"";s:1:"i";s:1:"1";}i:1355906494794;a:4:{s:3:"pic";s:38:"/images//20130527/6f62aae47ddeb4db.jpg";s:3:"url";s:61:"http://jiuzhiyue.com/?gallery--n,%E6%AF%9B%E6%AF%AF-grid.html";s:3:"alt";s:0:"";s:1:"i";s:13:"1355906494794";}}}';

//$str = 'a:2:{i:15;a:5:{s:11:"13658374231";a:5:{s:10:"spec_value";s:3:"14#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"110";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}s:11:"13658374292";a:5:{s:10:"spec_value";s:3:"15#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"111";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}s:11:"13658374323";a:5:{s:10:"spec_value";s:3:"16#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"118";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}s:11:"13658374355";a:5:{s:10:"spec_value";s:3:"13#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"109";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}s:11:"13658374364";a:5:{s:10:"spec_value";s:3:"17#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"119";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}}}';

//var_dump(mb_unserialize($str));

//$str = serialize($arr);


//$tsr=mb_unserialize($str);


//echo $tsr.'<br>';

//$str='a:1:{i:15;a:8:{i:13534930781;a:5:{s:10:"spec_value";s:3:"11#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"107";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}i:13534930792;a:5:{s:10:"spec_value";s:3:"12#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"108";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}i:13534930803;a:5:{s:10:"spec_value";s:3:"13#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"109";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}i:13534930814;a:5:{s:10:"spec_value";s:3:"14#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"110";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}i:13534930825;a:5:{s:10:"spec_value";s:3:"15#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"111";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}i:13534930836;a:5:{s:10:"spec_value";s:3:"16#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"118";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}i:13534930847;a:5:{s:10:"spec_value";s:3:"17#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"119";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}i:13534930858;a:5:{s:10:"spec_value";s:3:"18#";s:9:"spec_type";s:4:"text";s:13:"spec_value_id";s:3:"120";s:10:"spec_image";s:0:"";s:17:"spec_goods_images";s:0:"";}}}';


function mb_unserialize($serial_str) {

$serial_str= preg_replace('!s:(\d+):"(.*?)";!se', "'s:'.strlen('$2').':\"$2\";'", $serial_str );
        $serial_str= str_replace("\r", "", $serial_str);
		$serial_str=preg_replace('!i:(.*?);!se', "'s:'.strlen('$1').':\"$1\";'", $serial_str );
		return unserialize($serial_str);
		

}
var_dump(mb_unserialize($str));
//var_dump(mb_unserialize($str));

//var_dump(unserialize($str));

//phpinfo();
